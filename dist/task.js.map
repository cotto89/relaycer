{"version":3,"sources":["../src/task.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;IAAqB,I;;AAEnB;;;;;;;;AAQA,sBAAuC;AAAA,QAAzB,IAAyB,QAAzB,IAAyB;AAAA,QAAnB,EAAmB,QAAnB,EAAmB;AAAA,QAAf,GAAe,QAAf,GAAe;AAAA,QAAV,MAAU,QAAV,MAAU;AAAA;;AACrC,SAAK,IAAL,GAAY,IAAZ;AACA,SAAK,EAAL,GAAU,EAAV;AACA,SAAK,GAAL,GAAW,GAAX;AACA,SAAK,MAAL,GAAc,MAAd;AACD;;AAED;;;;;;;;wBAII,O,EAAS,I,EAAM;AACjB;AACA,UAAI,SAAS,EAAb;AACA,cAAQ,KAAK,IAAb;AACE,aAAK,UAAL;AACE,mBAAS,KAAK,EAAL,CAAQ,OAAR,EAAiB,KAAK,GAAtB,KAA8B,EAAvC;AACA;AACF,aAAK,aAAL;AACE,mBAAS,KAAK,EAAL,CAAQ,OAAR,EAAiB,IAAjB,EAAuB,KAAK,GAA5B,KAAoC,EAA7C;AACA;AACF,aAAK,SAAL;AACE,cAAI,KAAK,EAAL,CAAQ,OAAR,EAAiB,IAAjB,EAAuB,KAAK,GAA5B,CAAJ,EAAsC;AACpC,qBAAS,OAAT;AACD;AACD;AACF;AACE,mBAAS,EAAT;AACA;AAdJ;;AAiBA,UAAI,KAAK,MAAL,IAAe,KAAK,MAAL,CAAY,OAAZ,EAAqB,MAArB,CAAnB,EAAiD;AAC/C,iBAAS,EAAT;AACD;AACD,aAAO,MAAP;AACD;;;;;kBA7CkB,I","file":"task.js","sourcesContent":["export default class Task {\n\n  /**\n   * Creates an instance of Task.\n   *\n   * @param {string} type\n   * @param {Function} fn\n   * @param {any} [arg]\n   * @param {Function} [skipIf]\n   */\n  constructor({ type, fn, arg, skipIf }) {\n    this.type = type;\n    this.fn = fn;\n    this.arg = arg;\n    this.skipIf = skipIf;\n  }\n\n  /**\n   * @param {Object} current\n   * @param {Object} next\n   */\n  run(current, next) {\n    /** @type {string|Object} */\n    let result = {};\n    switch (this.type) {\n      case 'modifier':\n        result = this.fn(current, this.arg) || {};\n        break;\n      case 'transformer':\n        result = this.fn(current, next, this.arg) || {};\n        break;\n      case 'breaker':\n        if (this.fn(current, next, this.arg)) {\n          result = 'BREAK';\n        }\n        break;\n      default:\n        result = {};\n        break;\n    }\n\n    if (this.skipIf && this.skipIf(current, result)) {\n      result = {};\n    }\n    return result;\n  }\n}\n"]}